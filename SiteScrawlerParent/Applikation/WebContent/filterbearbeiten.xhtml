<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui" xmlns:b="http://bootsfaces.net/ui">
<h:head>
	<!-- Custom styles for this template -->
</h:head>
<h:body>
	<ui:composition template="/template.xhtml">
		<ui:define name="content">
			<!-- <f:metadata>
			    <f:viewParam name="filtergruppe" value="#{filterbearbeiten.filtergruppe}" />
			    <f:viewParam name="filterprofile" value="#{filterbearbeiten.filterprofile}" />
			</f:metadata> -->
		
		
			<!-- Email Informationen -->
			<div class="col-md-2 hidden-xs column">

				<div class="panel panel-default">
					<div class="panel-heading">
						<h3>Rythmus #{filtergruppe}</h3>
					</div>
					<div class="panel-body">

						<!-- Erstellungsrythmus -->

						<p>Erstellungsrythmus</p>

						<div>
							<input type="checkbox" /> E-Mail benachrichtung
						</div>
						<div>
							<h:form id="tages-option">
								<div class="btn-group">
									<button type="button" class="btn btn-default dropdown-toggle"
										data-toggle="dropdown" aria-haspopup="true"
										aria-expanded="false">
										#{filterbearbeiten.ausgewaehlteTagesoption} <span
											class="caret"></span>
									</button>
									<ul class="dropdown-menu">
										<p:repeat var="option"
											value="#{filterbearbeiten.tagesOptionen}">
											<li><p:commandLink
													action="#{filterbearbeiten.setAusgewaehlteTagesoption(option)}"
													value="#{option}" update="tages-option">

												</p:commandLink></li>
										</p:repeat>
									</ul>
								</div>
							</h:form>
						</div>

						<!-- Anzahl Tage -->


						<h:form id="tageszeiten">
							<div class="linkeUeberschrift" style="height: 50px;">
								<h:outputText id="filter-profil-text"
									value="Wiederholung: #{filterbearbeiten.filtergruppe.tageszeiten.size()}" />
								<p:commandLink action="#{filterbearbeiten.addTageszeiten()}"
									update="tageszeiten">
									<h:graphicImage value="/resources/image/add.svg"
										class="filter-profil-icon pull-right" />
								</p:commandLink>
							</div>
							<p:dataList class="list-group filterprofile"
								value="#{filterbearbeiten.filtergruppe.tageszeiten}" var="zeit"
								type="definition">
								<li class="list-group-item">
									<div class="artikel-titel-container">
										<h:form>
											<div class="zeit-input pull-left">

												<p:outputLabel for="time" value="" />
												<p:calendar id="time" value="#{zeit}" pattern="HH:mm"
													timeOnly="true" />

											</div>
											<p:commandLink
												action="#{filterbearbeiten.removeTageszeiten(zeit)}"
												update="tageszeiten">
												<h:graphicImage value="/resources/image/remove-minus.svg"
													class="filter-profil-icon pull-right" />
											</p:commandLink>
										</h:form>
									</div>
								</li>
							</p:dataList>
						</h:form>
					</div>
				</div>
			</div>

			<!-- Liste der Filterprofile in meiner Filtergruppe -->
			<div class="col-md-7 column">

				<div class="panel panel-default artikelPanel">
					<div class="panel-heading">
						<h3 class="pull-left">#{filterbearbeiten.filtergruppe.titel} bearbeiten</h3>
						<p:outputLabel class="pull-right" rendered="#{data.filtergruppe.isFirma()}" value="#{data.filtergruppe.firma.name}" style="color: blue;"></p:outputLabel>
						<p:outputLabel class="pull-right" rendered="#{!data.filtergruppe.isFirma()}" value="Private Filtergruppe" style="color: green;"></p:outputLabel>
						<div class="clearfix"></div>
					</div>
					<p:dataList class="list-group filtergruppe-profile"
						value="#{filterbearbeiten.filtergruppe.filterprofile}" var="profil"
						type="definition" id="filter-gruppen-profile">

						<div class="list-group-item artikel-titel-container"
							style="overflow: hidden; border-bottom: 1px solid #ddd;">
							<h:form>
								<div class="pull-left linkeUeberschrift"
									style="width: Calc(100% - 80px);">
									<h4>#{profil.titel}</h4>
									<div>
										<p:repeat value="#{profil.tags}" var="tag">
											<p class="pull-left tag">#{tag}</p>
										</p:repeat>
									</div>
								</div>

								<div class="pull-right">
									<p:commandLink
										action="#{filterbearbeiten.profilVonGruppeEntfernen(profil)}"
										class="pull-right"
										update="profil-liste filter-gruppen-profile">
										<p:graphicImage value="/resources/image/remove-minus.svg"
											class="filter-gruppe-profil-entfernen" />
									</p:commandLink>
								</div>
							</h:form>
						</div>
					</p:dataList>
				</div>
			</div>
			<!-- Alle Filterprofile -->
			<div class="col-md-3 hidden-xs column">
				<div class="panel panel-default artikelPanel">
					<div class="panel-heading">
						<div>
							<h3 class=" pull-left">Filterprofile</h3>
							<b:form>
								<a onclick="$('.modalPseudoClass').modal();return false;">
									<p:graphicImage class="pull-right" style="width: 50px;"
										value="/resources/image/file.svg" />
								</a>
							</b:form>
							<b:modal id="profil-anlegen-modal" title="Profil anlegen" styleClass="modalPseudoClass" >
								<b:form id="profil-anlegen-modal-content">
									<div class="form-group">
										<p:inputText
											value="#{filterbearbeiten.neuesFilterprofil.titel}"
											placeholder="Profilname" class="form-control"></p:inputText>
									</div>
									<div class="form-group artikel-titel-container clearfix">
										<p:inputText class="form-control pull-left"
											style="width: 60%;" id="tag-eingabe"
											value="#{filterbearbeiten.neuerTag}" placeholder="Neuer Tag"
											onkeypress="if (event.keyCode == 13) {#{filterbearbeiten.saveTag()}}"
											update="profil-anlegen-modal-content tag-eingabe tags" />
										<b:commandButton class="form-control pull-right"
											style="width: 35%;" value="Tag hinzufÃ¼gen"
											action="#{filterbearbeiten.saveTag()}"
											update="profil-anlegen-modal-content tag-eingabe tags" />
									</div>
									<div class="form-group">
										<div>
											<p:repeat value="#{filterbearbeiten.neuesFilterprofil.tags}"
												var="tag" id="tags">
												<p class="tag">#{tag}</p>
											</p:repeat>
										</div>
									</div>
									<div class="form-group"></div>
								</b:form>
								<f:facet name="footer">
									<b:form>
										<button type="button" class="btn btn-secondary"
											data-dismiss="modal">Verwerfen</button>
										<b:commandButton value="Anlegen" class="btn btn-primary"
											action="#{filterbearbeiten.neuesFilterprofilSpeichern()}"
											update="profil-anlegen-modal-content profil-liste" data-dismiss="modal"></b:commandButton>
									</b:form>
								</f:facet>
							</b:modal> 
							<div class="clearfix" />
						</div>
					</div>

					<p:dataList class="list-group filterprofile"
						value="#{filterbearbeiten.filterprofile}" var="profil" type="definition"
						id="profil-liste">
						<h:form id="profil-item">
							<li class="list-group-item">
								<div class="artikel-titel-container">
									<p:commandLink
										rendered="#{!filterbearbeiten.isInFiltergruppe(profil)}"
										action="#{filterbearbeiten.addProfil(profil)}"
										update="filter-gruppen-profile profil-item" ajax="true">

										<p:graphicImage value="/resources/image/add.svg"
											class="filter-profil-icon pull-left" />
									</p:commandLink>


									<p:commandLink
										rendered="#{filterbearbeiten.isInFiltergruppe(profil)}"
										action="#{filterbearbeiten.profilVonGruppeEntfernen(profil)}"
										update="filter-gruppen-profile profil-item">

										<p:graphicImage value="/resources/image/remove-minus.svg"
											class="filter-profil-icon pull-left" />
									</p:commandLink>
									<p:outputLabel id="filter-profil-text" value="#{profil.titel}" />
									<h:graphicImage value="/resources/image/edit.svg"
										class="filter-profil-icon pull-right" />
									<p:commandLink
										action="#{filterbearbeiten.deleteProfil(profil)}"
										update="profil-liste">
										<p:graphicImage value="/resources/image/remove-x.svg"
											class="filter-profil-icon pull-right" />
									</p:commandLink>


								</div>
							</li>
						</h:form>
					</p:dataList>

				</div>
			</div>

		</ui:define>
		<ui:define name="footer">

		</ui:define>
	</ui:composition>
</h:body>
</html>
