<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui" xmlns:b="http://bootsfaces.net/ui">
<h:head>
	<!-- Custom styles for this template -->
</h:head>
<h:body>
	<ui:composition template="/template.xhtml">
		<ui:define name="content"> 
			<!-- Email Informationen -->
			<div class="col-md-2 hidden-xs column">

				<div class="panel panel-default">
					<div class="panel-heading">
						<h3>Rythmus #{filtergruppe}</h3>
					</div>
					<div class="panel-body">

						<!-- Erstellungsrythmus -->

						<p>Erstellungsrythmus</p>

						<div>
							<input type="checkbox" /> E-Mail benachrichtung
						</div>
						<div>
							<h:form id="tages-option">
								<div class="btn-group">
									<button type="button" class="btn btn-default dropdown-toggle"
										data-toggle="dropdown" aria-haspopup="true"
										aria-expanded="false">
										#{filterbearbeiten.ausgewaehlteTagesoption} <span
											class="caret"></span>
									</button>
									<ul class="dropdown-menu">
										<p:repeat var="option"
											value="#{filterbearbeiten.tagesOptionen}">
											<li><p:commandLink 
													action="#{filterbearbeiten.setAusgewaehlteTagesoption(option)}"
													value="#{option}"
													update="tages-option tageszeiten">
												</p:commandLink></li>
										</p:repeat>
									</ul>
								</div>
							</h:form>
						</div>

						<!-- Uhrzeiten -->
						<h:form id="tageszeiten" rendered="#{filterbearbeiten.taeglich}">
							<div class="linkeUeberschrift" style="height: 50px;">
								<h:outputText id="filter-profil-text"
									value="Wiederholung: #{filterbearbeiten.filtergruppe.uhrzeiten.size()}" />
								<p:commandLink action="#{filterbearbeiten.addTageszeiten()}"
									update="tageszeiten">
									<h:graphicImage value="/resources/image/add.svg"
										class="filter-profil-icon pull-right" />
								</p:commandLink>
							</div>
							<p:dataList class="list-group uhrzeiten"
								value="#{filterbearbeiten.filtergruppe.uhrzeiten}" var="zeit"
								type="definition">
								<li class="list-group-item">
									<div class="artikel-titel-container">
										<h:form>
											<div class="zeit-input pull-left">

												<p:outputLabel for="time" value="" />
												<p:calendar id="time" value="#{zeit.uhrzeit}"
													pattern="HH:mm" timeOnly="true" />

											</div>
											<p:commandLink
												action="#{filterbearbeiten.removeTageszeiten(zeit)}"
												update="tageszeiten">
												<h:graphicImage value="/resources/image/remove-minus.svg"
													class="filter-profil-icon pull-right" />
											</p:commandLink>
										</h:form>
									</div>
								</li>
							</p:dataList>
						</h:form>
						<!-- !Uhrzeiten -->
					</div>
				</div>
			</div>

			<!-- Liste der Filterprofile in meiner Filtergruppe -->
			<div class="col-md-7 column">

				<div class="panel panel-default artikelPanel">
					<div class="panel-heading">
						<h3 class="pull-left">#{filterbearbeiten.filtergruppe.titel}
							bearbeiten</h3>
						<p:outputLabel class="pull-right"
							rendered="#{data.filtergruppe.firmenGruppe}"
							value="#{data.filtergruppe.firma.name}" style="color: blue;"></p:outputLabel>
						<p:outputLabel class="pull-right"
							rendered="#{data.filtergruppe.nutzerGruppe}"
							value="Private Filtergruppe" style="color: green;"></p:outputLabel>
						<div class="clearfix"></div>
					</div>
					<p:dataList class="list-group filtergruppe-profile"
						value="#{filterbearbeiten.filtergruppe.filterprofile}"
						var="profil" type="definition" id="filter-gruppen-profile">

						<div class="list-group-item artikel-titel-container"
							style="overflow: hidden; border-bottom: 1px solid #ddd;">
							<h:form>
								<div class="pull-left linkeUeberschrift"
									style="width: Calc(100% - 80px);">
									<h4>#{profil.filterprofilname}</h4>
									<div>

										<p class="pull-left tag">#{profil.tagstring}</p>
									</div>
								</div>

								<div class="pull-right">
									<p:commandLink
										action="#{filterbearbeiten.profilVonGruppeEntfernen(profil)}"
										class="pull-right"
										update="profil-liste filter-gruppen-profile">
										<p:graphicImage value="/resources/image/remove-minus.svg"
											class="filter-gruppe-profil-entfernen" />
									</p:commandLink>
								</div>
							</h:form>
						</div>
					</p:dataList>
				</div>
			</div>
			<!-- Alle Filterprofile -->
			<!-- Alle Filterprofile header -->
			<div class="col-md-3 hidden-xs column">
				<div class="panel panel-default artikelPanel">
					<div class="panel-heading">
						<div>
							<h3 class=" pull-left">Filterprofile</h3>
							<b:form>
								<a onclick="$('.modalPseudoClass').modal();return false;"> <p:graphicImage
										class="pull-right" style="width: 50px;"
										value="/resources/image/file.svg" />
								</a>
							</b:form>
							<b:modal id="profil-anlegen-modal" title="Profil anlegen"
								styleClass="modalPseudoClass">
								<b:form id="profil-anlegen-modal-content">
									<div class="form-group">
										<p:inputText
											value="#{filterbearbeiten.neuesFilterprofil.filterprofilname}"
											placeholder="Profilname" class="form-control">
											<p:ajax event="keyup" />
										</p:inputText>
									</div>
									<div class="form-group artikel-titel-container clearfix">
										<p>Filter</p>
										<p:inputText class="form-control pull-left"
											style="width: 60%;" id="tag-eingabe"
											value="#{filterbearbeiten.neuesFilterprofil.tagstring}"
											placeholder="Neuer Tag"
											update="profil-anlegen-modal-content tag-eingabe tags">
											<p:ajax event="keyup" />
										</p:inputText>
									</div>
								</b:form>
								<f:facet name="footer">
									<b:form>
										<button type="button" class="btn btn-secondary"
											data-dismiss="modal">Verwerfen</button>
										<b:commandButton value="Anlegen" class="btn btn-primary"
											action="#{filterbearbeiten.neuesFilterprofilSpeichern()}"
											update="profil-anlegen-modal-content profil-liste"
											data-dismiss="modal"></b:commandButton>
									</b:form>
								</f:facet>
							</b:modal>

							<!-- Ändere Filterprofil Modal -->
							<b:modal id="profil-aendern-modal" title="Profil ändern"
								styleClass="profilAendernClass">
								<b:form id="profil-aendern-modal-content">
									<div class="form-group">
										<p:inputText
											value="#{filterbearbeiten.zuAenderndesProfil.filterprofilname}"
											placeholder="Profilname" class="form-control">
											<p:ajax event="keyup" />
										</p:inputText>
									</div>
									<div class="form-group artikel-titel-container clearfix">
										<p>Filter</p>
										<p:inputText class="form-control pull-left"
											style="width: 60%;" id="tag-eingabe"
											value="#{filterbearbeiten.zuAenderndesProfil.tagstring}"
											placeholder="Neuer Tag"
											update="profil-aendern-modal-content tag-eingabe tags">
											<p:ajax event="keyup" />
										</p:inputText>
									</div>
								</b:form>
								<f:facet name="footer">
									<b:form>
										<button type="button" class="btn btn-secondary"
											data-dismiss="modal">Verwerfen</button>
										<b:commandButton value="Speichern" class="btn btn-primary"
											action="#{filterbearbeiten.modalAenderungSpeichern()}"
											update="profil-aendern-modal-content profil-liste"
											data-dismiss="modal"></b:commandButton>
									</b:form>
								</f:facet>
							</b:modal>
							<!-- !Ändere Filterprofil Modal -->

							<div class="clearfix" />
						</div>
					</div>

					<!-- Alle Filterprofile - Liste -->
					<p:dataList class="list-group filterprofile"
						value="#{filterbearbeiten.filterprofile}" var="profil"
						type="definition" id="profil-liste">
						<h:form id="profil-item">
							<li class="list-group-item">
								<div class="artikel-titel-container">
									<p:commandLink
										rendered="#{!filterbearbeiten.isInFiltergruppe(profil)}"
										action="#{filterbearbeiten.addProfil(profil)}"
										update="filter-gruppen-profile profil-item" ajax="true">

										<p:graphicImage value="/resources/image/add.svg"
											class="filter-profil-icon pull-left" />
									</p:commandLink>


									<p:commandLink
										rendered="#{filterbearbeiten.isInFiltergruppe(profil)}"
										action="#{filterbearbeiten.profilVonGruppeEntfernen(profil)}"
										update="filter-gruppen-profile profil-item">

										<p:graphicImage value="/resources/image/remove-minus.svg"
											class="filter-profil-icon pull-left" />
									</p:commandLink>
									<p:outputLabel id="filter-profil-text"
										value="#{profil.filterprofilname}" />
									<p:commandLink id="profil-aendern-button"
										oncomplete="$('.profilAendernClass').modal();return false;"
										update="profil-aendern-modal-content">
										<h:graphicImage value="/resources/image/edit.svg"
											class="filter-profil-icon pull-right" />
										<f:actionListener for="profil-aendern-button"
											binding="#{filterbearbeiten.aendereProfil(profil)}" />
									</p:commandLink>
									<p:commandLink
										action="#{filterbearbeiten.deleteProfil(profil)}"
										update="profil-liste">
										<p:graphicImage value="/resources/image/remove-x.svg"
											class="filter-profil-icon pull-right" />
									</p:commandLink>


								</div>
							</li>
						</h:form>
					</p:dataList>

				</div>
			</div>

		</ui:define>
		<ui:define name="footer">

		</ui:define>
	</ui:composition>
</h:body>
</html>
